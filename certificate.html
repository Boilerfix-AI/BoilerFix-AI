<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gas Safety Certificate</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:Arial,sans-serif; background:#1a1a2e; color:white; padding:20px; }
.container { max-width:900px; margin:0 auto; background:rgba(255,255,255,0.1); padding:30px; border-radius:15px; }
h1 { color:#667eea; margin-bottom:20px; text-align:center; }
.section { background:rgba(255,255,255,0.05); padding:20px; border-radius:10px; margin-bottom:20px; border-left:4px solid #667eea; }
h3 { color:#4facfe; margin-bottom:15px; }
.form-row { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; margin-bottom:15px; }
.form-group { margin-bottom:15px; }
label { display:block; margin-bottom:5px; font-weight:600; font-size:13px; }
input, select, textarea { width:100%; padding:10px; border:2px solid rgba(255,255,255,0.3); border-radius:8px; background:rgba(255,255,255,0.1); color:white; font-size:14px; }
input::placeholder, textarea::placeholder { color:rgba(255,255,255,0.5); }
select { cursor:pointer; }
select option { background:#1a1a2e; }
button { width:100%; padding:18px; background:linear-gradient(135deg,#667eea,#764ba2); border:none; border-radius:10px; color:white; font-size:18px; font-weight:700; cursor:pointer; margin-top:20px; text-transform:uppercase; }
button:hover { transform:translateY(-2px); box-shadow:0 10px 30px rgba(102,126,234,0.5); }
.appliance-row { background:rgba(255,255,255,0.03); padding:15px; border-radius:8px; margin-bottom:10px; }
.add-btn { background:linear-gradient(135deg,#4fd1c5,#00f2fe); padding:10px 20px; border:none; border-radius:8px; color:white; font-weight:600; cursor:pointer; margin-top:10px; width:auto; }
.add-btn:hover { opacity:0.9; }
small { display:block; color:rgba(255,255,255,0.6); margin-top:3px; font-size:11px; }
</style>
</head>
<body>
<div class="container">
<h1>ðŸ“„ Gas Safety Certificate</h1>

<div class="section">
<h3>Business Details</h3>
<div class="form-row">
<div class="form-group">
<label>Business Name</label>
<input type="text" id="bizName" placeholder="ABC Heating Ltd">
</div>
<div class="form-group">
<label>Gas Safe Number</label>
<input type="text" id="gasSafe" placeholder="123456">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label>Engineer Name</label>
<input type="text" id="engName" placeholder="John Smith">
</div>
<div class="form-group">
<label>Engineer Gas Safe ID Card No</label>
<input type="text" id="cardNo" placeholder="A12345">
</div>
</div>
<div class="form-group">
<label>Business Address</label>
<textarea id="bizAddr" rows="2" placeholder="123 High Street, Birmingham, B1 1AA"></textarea>
</div>
<div class="form-row">
<div class="form-group">
<label>Tel No</label>
<input type="tel" id="bizTel" placeholder="0121 123 4567">
</div>
</div>
</div>

<div class="section">
<h3>Job Address & Landlord Details</h3>
<div class="form-row">
<div class="form-group">
<label>Property Name</label>
<input type="text" id="propName" placeholder="Flat 1">
</div>
<div class="form-group">
<label>Property Address</label>
<textarea id="propAddr" rows="2" placeholder="10 Main Road, Birmingham, B12 3CD"></textarea>
</div>
</div>
<div class="form-row">
<div class="form-group">
<label>Property Tel No</label>
<input type="tel" id="propTel" placeholder="0121 987 6543">
</div>
<div class="form-group">
<label>Is Accommodation Rented? (Y/N)</label>
<select id="rented">
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
</div>
</div>
<div class="form-row">
<div class="form-group">
<label>Landlord/Agent Name</label>
<input type="text" id="landlordName" placeholder="Mr Jones">
</div>
<div class="form-group">
<label>Landlord/Agent Address</label>
<textarea id="landlordAddr" rows="2" placeholder="Address"></textarea>
</div>
</div>
<div class="form-row">
<div class="form-group">
<label>Landlord Tel No</label>
<input type="tel" id="landlordTel" placeholder="0121 111 2222">
</div>
<div class="form-group">
<label>No. Of Appliances Tested</label>
<input type="number" id="numApps" value="1" min="1" max="5">
</div>
</div>
</div>

<div class="section">
<h3>Gas Installation Pipework Checks</h3>
<div class="form-row">
<div class="form-group">
<label>Satisfactory Visual Inspection (Y/N)</label>
<select id="visualInsp">
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
</div>
<div class="form-group">
<label>Emergency Control Accessible (Y/N)</label>
<select id="emergency">
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
</div>
<div class="form-group">
<label>Satisfactory Gas Tightness Test (Y/N)</label>
<select id="gasTight">
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
</div>
<div class="form-group">
<label>Equipotential Bonding Satisfactory (Y/N)</label>
<select id="bonding">
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
</div>
</div>
</div>

<div class="section">
<h3>Appliances (up to 5)</h3>
<div id="appliances">
<div class="appliance-row">
<h4 style="color:#ffa726;margin-bottom:10px">Appliance 1</h4>
<div class="form-row">
<div class="form-group">
<label>Location</label>
<input type="text" class="appLoc" placeholder="Kitchen">
</div>
<div class="form-group">
<label>Make</label>
<input type="text" class="appMake" placeholder="Worcester">
</div>
<div class="form-group">
<label>Model</label>
<input type="text" class="appModel" placeholder="28CDi">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label>Type</label>
<input type="text" class="appType" placeholder="Boiler">
</div>
<div class="form-group">
<label>Type of Flue</label>
<select class="appFlue">
<option value="Balanced">Balanced</option>
<option value="Open">Open</option>
<option value="Room Sealed">Room Sealed</option>
</select>
</div>
<div class="form-group">
<label>Landlords Appliance? (Y/N)</label>
<select class="appLandlord">
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
</div>
<div class="form-group">
<label>Inspected? (Y/N)</label>
<select class="appInsp">
<option value="Y">Yes</option>
<option value="N">No</option>
</select>
</div>
</div>
<div class="form-row">
<div class="form-group">
<label>Heat Input kW/h/Btu/h</label>
<input type="text" class="appHeat" placeholder="28kW">
</div>
<div class="form-group">
<label>Safe Condition (Pass/Fail/NA)</label>
<select class="appSafe">
<option value="Pass">Pass</option>
<option value="Fail">Fail</option>
<option value="NA">N/A</option>
</select>
</div>
<div class="form-group">
<label>CO PPM</label>
<input type="text" class="appCO" placeholder="5">
</div>
</div>
</div>
</div>
<small>Note: Currently supports up to 5 appliances. More can be added manually to the PDF if needed.</small>
</div>

<div class="section">
<h3>Defects & Remedial Work</h3>
<div class="form-group">
<label>Defect(s) Identified</label>
<textarea id="defects" rows="3" placeholder="None identified or describe any defects..."></textarea>
</div>
<div class="form-group">
<label>Warning Advice Issued (Y/N)</label>
<select id="warning">
<option value="N">No</option>
<option value="Y">Yes</option>
</select>
</div>
<div class="form-group">
<label>Remedial Work Undertaken</label>
<textarea id="remedial" rows="3" placeholder="Details of work carried out..."></textarea>
</div>
</div>

<div class="section">
<h3>Certificate Details</h3>
<div class="form-row">
<div class="form-group">
<label>Inspection Date</label>
<input type="date" id="inspDate">
</div>
<div class="form-group">
<label>Next Gas Safety Check Must Be Completed By</label>
<input type="date" id="nextDate">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label>Received By (Print Name)</label>
<input type="text" id="receivedBy" placeholder="Tenant/Landlord name">
</div>
<div class="form-group">
<label>Issued By (Engineer Name)</label>
<input type="text" id="issuedBy" placeholder="Engineer name">
</div>
</div>
</div>

<button onclick="generatePDF()">ðŸ“¥ Download Gas Safety Certificate PDF</button>
</div>

<script>
async function generatePDF() {
const { jsPDF } = window.jspdf;
const doc = new jsPDF('p', 'mm', 'a4');

// Get all form values
const data = {
bizName: document.getElementById('bizName').value || 'N/A',
gasSafe: document.getElementById('gasSafe').value || 'N/A',
engName: document.getElementById('engName').value || 'N/A',
cardNo: document.getElementById('cardNo').value || 'N/A',
bizAddr: document.getElementById('bizAddr').value || 'N/A',
bizTel: document.getElementById('bizTel').value || 'N/A',
propName: document.getElementById('propName').value || 'N/A',
propAddr: document.getElementById('propAddr').value || 'N/A',
propTel: document.getElementById('propTel').value || 'N/A',
rented: document.getElementById('rented').value,
landlordName: document.getElementById('landlordName').value || 'N/A',
landlordAddr: document.getElementById('landlordAddr').value || 'N/A',
landlordTel: document.getElementById('landlordTel').value || 'N/A',
numApps: document.getElementById('numApps').value,
visualInsp: document.getElementById('visualInsp').value,
emergency: document.getElementById('emergency').value,
gasTight: document.getElementById('gasTight').value,
bonding: document.getElementById('bonding').value,
defects: document.getElementById('defects').value || 'None',
warning: document.getElementById('warning').value,
remedial: document.getElementById('remedial').value || 'None',
inspDate: document.getElementById('inspDate').value || 'N/A',
nextDate: document.getElementById('nextDate').value || 'N/A',
receivedBy: document.getElementById('receivedBy').value || 'N/A',
issuedBy: document.getElementById('issuedBy').value || 'N/A'
};

// Header
doc.setFontSize(16);
doc.setFont(undefined, 'bold');
doc.text('LANDLORD/HOMEOWNER GAS SAFETY RECORD', 105, 15, {align:'center'});

doc.setFontSize(8);
doc.setFont(undefined, 'normal');
doc.text('Gas Safety (Installation and Use) Regulations 1998', 105, 20, {align:'center'});

let y = 30;

// Business Details Table
doc.autoTable({
startY: y,
head: [['Details Of Registered Business', 'Job Address', 'Landlord/Agent Address']],
body: [
['Business Name: ' + data.bizName, 'Name: ' + data.propName, 'Name: ' + data.landlordName],
['Gas Safe No: ' + data.gasSafe, 'Address: ' + data.propAddr, 'Address: ' + data.landlordAddr],
['Engineer Name: ' + data.engName + ' | Card No: ' + data.cardNo, '', ''],
['Address: ' + data.bizAddr, '', ''],
['Tel No: ' + data.bizTel, 'Tel No: ' + data.propTel, 'Tel No: ' + data.landlordTel],
['', 'Rented: ' + data.rented, 'No. Appliances: ' + data.numApps]
],
theme: 'grid',
headStyles: { fillColor: [0, 0, 0], fontSize: 8 },
bodyStyles: { fontSize: 7 },
});

y = doc.lastAutoTable.finalY + 5;

// Gas Installation
doc.autoTable({
startY: y,
head: [['Gas Installation Pipework', 'Visual Inspection', 'Emergency Control', 'Gas Tightness', 'Bonding']],
body: [[
'Checks:',
data.visualInsp,
data.emergency,
data.gasTight,
data.bonding
]],
theme: 'grid',
headStyles: { fillColor: [0, 0, 0], fontSize: 7 },
bodyStyles: { fontSize: 7 },
});

y = doc.lastAutoTable.finalY + 5;

// Appliances
const appData = [];
const appRows = document.querySelectorAll('.appliance-row');
appRows.forEach((row, i) => {
if (i < parseInt(data.numApps)) {
appData.push([
(i+1).toString(),
row.querySelector('.appLoc').value || '',
row.querySelector('.appMake').value || '',
row.querySelector('.appModel').value || '',
row.querySelector('.appType').value || '',
row.querySelector('.appFlue').value || '',
row.querySelector('.appLandlord').value || '',
row.querySelector('.appInsp').value || '',
row.querySelector('.appHeat').value || '',
row.querySelector('.appSafe').value || '',
row.querySelector('.appCO').value || ''
]);
}
});

doc.autoTable({
startY: y,
head: [['#', 'Location', 'Make', 'Model', 'Type', 'Flue', 'LL App', 'Insp', 'Heat', 'Safe', 'CO']],
body: appData,
theme: 'grid',
headStyles: { fillColor: [0, 0, 0], fontSize: 7 },
bodyStyles: { fontSize: 6 },
});

y = doc.lastAutoTable.finalY + 5;

// Defects
doc.autoTable({
startY: y,
head: [['Defect(s) Identified', 'Warning', 'Remedial Work']],
body: [[data.defects, data.warning, data.remedial]],
theme: 'grid',
headStyles: { fillColor: [0, 0, 0], fontSize: 7 },
bodyStyles: { fontSize: 7 },
});

y = doc.lastAutoTable.finalY + 5;

// Footer
doc.autoTable({
startY: y,
body: [
['Received By: ' + data.receivedBy, 'Date: ' + data.inspDate],
['Issued By: ' + data.issuedBy, 'Next Check Due: ' + data.nextDate]
],
theme: 'grid',
bodyStyles: { fontSize: 8 },
});

const filename = 'Gas_Safety_Certificate_' + data.inspDate.replace(/-/g, '') + '.pdf';
doc.save(filename);

alert('âœ… Certificate Downloaded!');
}
</script>
</body>
</html>
